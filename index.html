<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>极速跑酷 Ultra | Infinite Parkour Runner</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app">
        <!-- Game Canvas -->
        <canvas id="gameCanvas" width="1920" height="1080"></canvas>
        
        <!-- Particle Canvas -->
        <canvas id="particleCanvas" width="1920" height="1080"></canvas>
        
        <!-- HUD -->
        <div id="hud" class="hud">
            <div class="hud-left">
                <div class="stat-group">
                    <span class="label">分数</span>
                    <span id="score" class="value">0</span>
                </div>
                <div class="stat-group">
                    <span class="label">距离</span>
                    <span id="distance" class="value">0m</span>
                </div>
            </div>
            
            <div class="hud-center">
                <div class="power-indicators">
                    <div id="shield-indicator" class="power-indicator">🛡️</div>
                    <div id="magnet-indicator" class="power-indicator">🧲</div>
                    <div id="boost-indicator" class="power-indicator">⚡</div>
                </div>
            </div>
            
            <div class="hud-right">
                <div class="stat-group">
                    <span class="label">生命</span>
                    <div id="lives" class="lives">
                        <span class="heart">❤️</span>
                        <span class="heart">❤️</span>
                        <span class="heart">❤️</span>
                    </div>
                </div>
                <div class="stat-group">
                    <span class="label">倍数</span>
                    <span id="multiplier" class="value multiplier">x1</span>
                </div>
            </div>
        </div>
        
        <!-- Speed Indicator -->
        <div id="speedometer" class="speedometer">
            <div class="speed-label">速度</div>
            <div id="speed-value" class="speed-value">1.0x</div>
            <div class="speed-bar">
                <div id="speed-fill" class="speed-fill"></div>
            </div>
        </div>
        
        <!-- Main Menu -->
        <div id="mainMenu" class="panel active">
            <div class="menu-bg"></div>
            <div class="menu-content">
                <h1 class="game-title">
                    <span class="title-main">极速跑酷</span>
                    <span class="title-sub">ULTRA</span>
                </h1>
                <p class="game-desc">无限滚屏 · 障碍躲避 · 道具收集 · 生存挑战</p>
                
                <div class="menu-stats">
                    <div class="stat-item">
                        <span class="stat-label">最高分</span>
                        <span id="menu-best" class="stat-value">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">最远距离</span>
                        <span id="menu-distance" class="stat-value">0m</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">💰 金币</span>
                        <span id="menu-currency" class="stat-value">0</span>
                    </div>
                </div>
                
                <!-- 每日挑战显示 -->
                <div class="daily-challenge">
                    <h3>📅 每日挑战</h3>
                    <div id="daily-challenge-desc" class="challenge-desc">加载中...</div>
                    <div class="challenge-progress">
                        <div id="daily-progress-bar" class="progress-bar">
                            <div id="daily-progress-fill" class="progress-fill"></div>
                        </div>
                        <span id="daily-progress-text" class="progress-text">0/0</span>
                    </div>
                </div>
                
                <div class="controls-info">
                    <div class="control-group">
                        <h3>键盘控制</h3>
                        <div class="control-item">空格/↑/W - 跳跃（可二段跳）</div>
                        <div class="control-item">↓/S - 滑铲</div>
                        <div class="control-item">P - 暂停游戏</div>
                    </div>
                    <div class="control-group">
                        <h3>触屏控制</h3>
                        <div class="control-item">点击上半屏 - 跳跃</div>
                        <div class="control-item">点击下半屏 - 滑铲</div>
                    </div>
                </div>
                
                <div class="menu-buttons">
                    <button id="startBtn" class="btn btn-primary">
                        <span class="btn-text">🎮 开始游戏</span>
                        <span class="btn-glow"></span>
                    </button>
                    <button id="shopBtn" class="btn btn-secondary">
                        <span class="btn-text">🛒 商店</span>
                        <span class="btn-glow"></span>
                    </button>
                    <button id="achievementsBtn" class="btn btn-ghost">
                        <span class="btn-text">🏆 成就</span>
                        <span class="btn-glow"></span>
                    </button>
                </div>
                
                <div class="power-tips">
                    <div class="tip-item">🛡️ 护盾 - 免疫一次碰撞</div>
                    <div class="tip-item">🧲 磁铁 - 自动吸引金币</div>
                    <div class="tip-item">⚡ 加速 - 提升移动速度</div>
                    <div class="tip-item">💎 倍数 - 双倍得分</div>
                </div>
            </div>
        </div>
        
        <!-- Pause Menu -->
        <div id="pauseMenu" class="panel">
            <div class="menu-content">
                <h2>游戏暂停</h2>
                <div class="pause-stats">
                    <div class="stat-item">
                        <span class="stat-label">当前分数</span>
                        <span id="pause-score" class="stat-value">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">当前距离</span>
                        <span id="pause-distance" class="stat-value">0m</span>
                    </div>
                </div>
                <div class="btn-group">
                    <button id="resumeBtn" class="btn btn-primary">继续游戏</button>
                    <button id="restartBtn" class="btn btn-secondary">重新开始</button>
                    <button id="menuBtn" class="btn btn-ghost">返回菜单</button>
                </div>
            </div>
        </div>
        
        <!-- Game Over -->
        <div id="gameOverMenu" class="panel">
            <div class="menu-content">
                <h2 class="game-over-title">游戏结束</h2>
                <div class="final-stats">
                    <div class="stat-item highlight">
                        <span class="stat-label">最终分数</span>
                        <span id="final-score" class="stat-value">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">跑步距离</span>
                        <span id="final-distance" class="stat-value">0m</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">收集金币</span>
                        <span id="final-coins" class="stat-value">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">最高纪录</span>
                        <span id="final-best" class="stat-value">0</span>
                    </div>
                </div>
                <div id="new-record" class="new-record">🎉 新纪录！</div>
                <div class="btn-group">
                    <button id="playAgainBtn" class="btn btn-primary">再来一局</button>
                    <button id="backToMenuBtn" class="btn btn-ghost">返回菜单</button>
                </div>
            </div>
        </div>
        
        <!-- Touch Controls -->
        <div id="touchControls" class="touch-controls">
            <div class="touch-hint">点击上半屏跳跃，下半屏滑铲</div>
        </div>
        
        <!-- Shop Menu -->
        <div id="shopMenu" class="panel">
            <div class="menu-content">
                <h2>🛒 角色商店</h2>
                <div class="currency-display">
                    <span class="currency-label">💰 金币:</span>
                    <span id="shop-currency" class="currency-value">0</span>
                </div>
                
                <div class="skins-grid" id="skinsGrid">
                    <!-- 皮肤项目将通过JavaScript动态生成 -->
                </div>
                
                <div class="btn-group">
                    <button id="shopBackBtn" class="btn btn-ghost">返回菜单</button>
                </div>
            </div>
        </div>
        
        <!-- Achievements Menu -->
        <div id="achievementsMenu" class="panel">
            <div class="menu-content">
                <h2>🏆 成就系统</h2>
                
                <div class="achievements-grid" id="achievementsGrid">
                    <!-- 成就项目将通过JavaScript动态生成 -->
                </div>
                
                <div class="btn-group">
                    <button id="achievementsBackBtn" class="btn btn-ghost">返回菜单</button>
                </div>
            </div>
        </div>
        
        <!-- Environment Indicator -->
        <div id="environmentIndicator" class="environment-indicator">
            <div class="env-name" id="currentEnvName">城市夜景</div>
            <div class="env-timer">
                <div class="timer-bar">
                    <div id="envTimerFill" class="timer-fill"></div>
                </div>
            </div>
        </div>
        
        <!-- Combo Display -->
        <div id="comboDisplay" class="combo-display">
            <div class="combo-text">连击</div>
            <div id="comboCount" class="combo-count">0</div>
        </div>
        
        <!-- Loading Screen -->
        <div id="loadingScreen" class="loading-screen">
            <div class="loading-content">
                <div class="loading-spinner"></div>
                <div class="loading-text">加载中...</div>
            </div>
        </div>
    </div>
    
    <script>
        console.log('开始加载script.js');
        // 确保DOM完全加载后再初始化游戏
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM已加载，检查Canvas元素...');
            const gameCanvas = document.getElementById('gameCanvas');
            const particleCanvas = document.getElementById('particleCanvas');
            console.log('gameCanvas:', gameCanvas);
            console.log('particleCanvas:', particleCanvas);
            
            if (!gameCanvas || !particleCanvas) {
                console.error('Canvas元素未找到！');
                return;
            }
            
            // 强制设置Canvas样式
            gameCanvas.style.display = 'block';
            gameCanvas.style.position = 'absolute';
            gameCanvas.style.top = '0';
            gameCanvas.style.left = '0';
            gameCanvas.style.zIndex = '1';
            gameCanvas.style.background = '#001122';
            
            console.log('Canvas样式已设置，准备初始化游戏...');
        });
    </script>
    <script src="script.js"></script>
</body>
</html>
